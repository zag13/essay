# 《代码大全2》

> 经常看完一本书，就会忘记书中的内容，所以在这里记录一些书中的内容，以便日后查阅。

[思维导图](/mind.html?path=/technology-stack/programming-philosophy/《代码大全2》&initialexpandlevel=2)

基于第三十四章 关于软件匠艺 来对《代码大全》做一个总结。

- **征服复杂性** 降低复杂性是软件开发的核心
- **优选开发过程** 不同大小的项目需要的流程会有所不同
- **注重可读性** 看代码的时间比写代码的时间多得多
- **深入语言去编程，而不是用语言来编程** 仔细思考自己要达到的目标，然后评估如何利用手头上的工具来达到目标
- **借助规范来保持专注** 规范是用于管理复杂性的知识工具
- **面向问题域编程** 将时间和专注力用于较高的层次
- **当心落石** 小心那些警告信号
- **迭代，迭代，迭代，重要的事情说三遍** 要快速、低成本地构建一次性的部件
- **警惕编程中的执念** 可以有，但不要过度

## 需求

### 针对功能需求

- 是否详细定义了系统的全部输入，包括其来源、精度、取值范围、出现频率等？
- 是否详细定义了系统的全部输出，包括目的地、精度、取值范围、出现频率、格式等？
- 是否详细定义了所有输出格式（web页面、报表，等等）？
- 是否详细定义了所有硬件及软件的外部接口？
- 是否详细定义了全部外部通信接口，包括握手协议、纠错协议、通信协议等？
- 是否列出了用户想要做的全部事情？
- 是否详细定义了每个任务所用的数据，以及每个任务得到的数据？

### 针对非功能需求（质量）需求

- 是否为全部必要的操作，从用户的视角，详细描述了期望响应时间？
- 是否详细描述了其他与计时有关的考虑，例如处理时间、数据传输率，系统吞吐量？
- 是否详细定义了安全级别？
- 是否详细定义了可靠性，包括软件失灵的后果、发生故障时需要保护的至关重要的信息、错误检测与恢复的策略等？
- 是否详细定义了机器内存和剩余磁盘空间的最小值？
- 是否详细定义了系统的可维护性，包括适应特定功能的变更、操作环境的变更、与其他软件的接口的变更能力？
- 是否包含对“成功”的定义？“失败”的定义呢？

### 需求的质量

- 需求是用用户的语言书写的吗？用户也这么认为吗？
- 每条需求都不与其他需求冲突吗？
- 是否详细定义了相互竞争的特性之间的权衡——例如，健壮性与正确性之间的权衡？
- 是否避免在需求中规定设计（方案）？
- 需求是否在详细程度上保持相当一致的水平？有些需求应该更详细地描述吗？有些需求应该更粗略地描述吗？
- 需求是否足够清晰，即使转交给一个独立的小组去构建，他们也能理解吗？开发者也这么想吗？
- 每个条款都与待解决的问题及其解决方案相关吗？能从每个条款上溯到它在问题域中对应的根源吗？
- 是否每条需求都是可测试的？是否可能进行独立的测试，以检验满不满足各项需求？
- 是否详细描述了所有可能的对需求的改动，包括各项改动的可能性？

### 需求的完备性

- 对于在开始开发之前无法获得的信息，是否详细描述了信息不完全的区域？
- 需求的完备度是否能达到这种程度：如果产品满足所有需求，那么它就是可接受的？
- 你对全部需求都感到很舒服吗？你是否已经去掉了那些不可能实现的需求——那些只是为了安抚客户和老板的东西？

## 架构

### 针对各架构主题

- 程序的整体组织结构是否清晰？是否包含一个良好的架构全局观（及其理由）？
- 是否明确定义了主要的构造块（包括每个构造块的职责范围及与其他构造块的接口）？
- 是否明显涵盖了“需求”中列出的所有功能（每个功能对应的构造块不太多也不太少）？
- 是否描述并论证了那些最关键的类？
- 是否描述并论证了数据设计？
- 是否详细定义了数据库的组织结构和内容？
- 是否指出了所用关键的业务规则，并描述其对系统的影响？
- 是否描述了用户界面设计的策略？
- 是否将用户界面模块化，使界面的变更不会影响程序其余部分？
- 是否描述并论证了处理 I/O 的策略？
- 是否估算了稀缺资源（如线程、数据库连接、句柄、网络带宽等）的使用量，是否描述并论证了资源管理的策略？
- 是否描述了架构的安全需求？
- 架构是否为每个类、每个子系统、或每个功能域(functionality area)提出空间与时间预算？
- 架构是否描述了如何达到可伸缩性？
- 架构是否关注互操作性？
- 是否描述了国际化/本地化的策略？
- 是否提供了一套内聚的错误处理策略？
- 是否规定了容错的办法（如果需要）？
- 是否证实了系统各个部分的技术可行性？
- 是否详细描述了过度工程(overengineering)的方法？
- 是否包含了必要的“买 vs. 造”的决策？
- 架构是否描述了如何加工被复用的代码，使之符合其他架构目标？
- 是否将架构设计得能够适应很可能出现的变更？

### 架构的总体质量

- 架构是否解决了全部需求？
- 有没有哪个部分是“过度架构/overarchitected”或“欠架构/underarchitected”？是否明确宣布了在这方面的预期指标？
- 整个架构是否在概念上协调一致？
- 顶层设计是否独立于用作实现它的机器和语言？
- 是否说明了所有主要的决策的动机？
- 你，作为一名实现该系统的程序员，是否对这个架构感觉良好？