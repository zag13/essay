# 《100 go mistakes》

[思维导图](/mind.html?path=/language/go/《100%20go%20mistakes》)

## 代码和项目组织

1. **意外的变量隐藏** 要注意短声明是否会覆盖原先变量
2. **不必要的嵌套代码** 简单可读，尽早返回
3. **滥用 init 函数** init 在变量声明之后，main 函数之前执行，多个 init 函数按照声明顺序执行
4. **过度使用 getter 和 setter** 尽量使用直接访问，不要过度封装
5. **接口污染** 若无必要，勿增实体（抽象应该是被发现，而不是被创建）
6. **生产者的接口** 一般放在消费端维护，若确有必要放在生产者一方，应尽量减小抽象
7. **返回接口** 一般返回具体抽象
8. **any 意味着 nothing** any 丢失了类型信息
9. **乱用泛型** 应在一些通用的数据结构和函数中使用
10. **误用嵌入类型** 小心方法提升
11. **不使用函数选项模式** 萝卜青菜，各有所爱
12. **项目无组织** 社区公约 golang-standards
13. **创建通用包** 不推荐 common、utils、tools 等没有具体含义的包
14. **变量和包名冲突** 小心变量和包名冲突
15. **缺少代码文档** 每个导出的元素都应有文档
16. **不使用 linters** 磨刀不误砍柴工

## 数据类型

17. **使用 8 进制字面量** 二进制：`0b`，八进制：`0o`，十六进制：`0x`
18. **忽略整数溢出** Go 对溢出是静默的
19. **不了解浮点数** 